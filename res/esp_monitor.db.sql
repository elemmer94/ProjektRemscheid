BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "accessLog" (
	"id"	INTEGER,
	"credential_id"	INTEGER NOT NULL,
	"status"	TEXT NOT NULL CHECK("status" IN ('granted', 'denied')),
	"timestamp"	TEXT DEFAULT (datetime('now')),
	PRIMARY KEY("id" AUTOINCREMENT),
	FOREIGN KEY("credential_id") REFERENCES "credential"("id")
);
CREATE TABLE IF NOT EXISTS "credential" (
	"id"	INTEGER,
	"user_id"	INTEGER NOT NULL,
	"type"	TEXT NOT NULL CHECK("type" IN ('rfid', 'pixy')),
	"value"	TEXT NOT NULL UNIQUE,
	PRIMARY KEY("id" AUTOINCREMENT),
	FOREIGN KEY("user_id") REFERENCES "users"("id")
);
CREATE TABLE IF NOT EXISTS "device" (
	"id"	INTEGER,
	"deviceName"	TEXT NOT NULL UNIQUE,
	"ip"	TEXT NOT NULL,
	"mac"	TEXT NOT NULL,
	PRIMARY KEY("id" AUTOINCREMENT)
);
CREATE TABLE IF NOT EXISTS "sensor" (
	"id"	INTEGER,
	"device_id"	INTEGER NOT NULL,
	"type"	TEXT NOT NULL,
	"unit"	TEXT NOT NULL,
	PRIMARY KEY("id" AUTOINCREMENT),
	FOREIGN KEY("device_id") REFERENCES "device"("id")
);
CREATE TABLE IF NOT EXISTS "sensorData" (
	"id"	INTEGER,
	"sensor_id"	INTEGER NOT NULL,
	"value"	REAL NOT NULL,
	"timestamp"	TEXT DEFAULT (datetime('now')),
	PRIMARY KEY("id" AUTOINCREMENT),
	FOREIGN KEY("sensor_id") REFERENCES "sensor"("id")
);
CREATE TABLE IF NOT EXISTS "users" (
	"id"	INTEGER,
	"username"	TEXT NOT NULL UNIQUE,
	"password"	TEXT NOT NULL,
	"created_at"	TEXT DEFAULT (datetime('now')),
	PRIMARY KEY("id" AUTOINCREMENT)
);
INSERT INTO "credential" VALUES (1,3,'rfid',' 79 16 AA B2');
INSERT INTO "credential" VALUES (2,3,'rfid',' FA DD 5D 19');
INSERT INTO "credential" VALUES (3,3,'pixy','3');
INSERT INTO "device" VALUES (1,'esp-eingang','192.168.0.100','34:94:54:83:11:AF');
INSERT INTO "device" VALUES (2,'esp-lager1','192.168.0.104','C8:2B:96:2C:F0:F4');
INSERT INTO "sensor" VALUES (1,1,'Spannung','V');
INSERT INTO "sensor" VALUES (2,2,'Ultrasonic','');
INSERT INTO "sensor" VALUES (3,3,'IR','');
INSERT INTO "sensorData" VALUES (1436,1,3.10511111111111,'2025-06-11 21:58:19');
INSERT INTO "sensorData" VALUES (1437,1,3.08845070422536,'2025-06-11 21:59:19');
INSERT INTO "sensorData" VALUES (1438,1,3.10400735294119,'2025-06-11 22:02:48');
INSERT INTO "sensorData" VALUES (1439,1,3.11569892473119,'2025-06-11 22:05:12');
INSERT INTO "sensorData" VALUES (1440,1,3.17915254237287,'2025-06-11 22:06:36');
INSERT INTO "sensorData" VALUES (1441,3,1.0,'2025-06-11 22:06:47');
INSERT INTO "sensorData" VALUES (1442,3,1.0,'2025-06-11 22:06:48');
INSERT INTO "sensorData" VALUES (1443,3,1.0,'2025-06-11 22:06:49');
INSERT INTO "sensorData" VALUES (1444,1,3.16329411764706,'2025-06-11 22:07:36');
INSERT INTO "sensorData" VALUES (1445,1,3.16247058823529,'2025-06-11 22:08:36');
INSERT INTO "sensorData" VALUES (1446,1,3.16176470588235,'2025-06-11 22:09:36');
INSERT INTO "sensorData" VALUES (1447,1,3.15858823529412,'2025-06-11 22:10:36');
INSERT INTO "sensorData" VALUES (1448,1,3.17647058823529,'2025-06-11 22:11:36');
INSERT INTO "sensorData" VALUES (1449,1,3.17635294117647,'2025-06-11 22:12:36');
INSERT INTO "sensorData" VALUES (1450,1,3.17741176470588,'2025-06-11 22:13:36');
INSERT INTO "sensorData" VALUES (1451,1,3.17595238095238,'2025-06-11 22:14:36');
INSERT INTO "sensorData" VALUES (1452,1,3.17858823529412,'2025-06-11 22:15:36');
INSERT INTO "sensorData" VALUES (1453,1,3.17847058823529,'2025-06-11 22:16:36');
INSERT INTO "sensorData" VALUES (1454,1,3.18693069306931,'2025-06-11 22:17:48');
INSERT INTO "sensorData" VALUES (1455,1,3.182,'2025-06-11 22:18:48');
INSERT INTO "sensorData" VALUES (1456,1,3.19728476821193,'2025-06-11 22:20:34');
INSERT INTO "sensorData" VALUES (1457,1,3.18035714285714,'2025-06-11 22:21:34');
INSERT INTO "sensorData" VALUES (1458,1,3.18082352941176,'2025-06-11 22:22:34');
INSERT INTO "sensorData" VALUES (1459,1,3.18023529411765,'2025-06-11 22:23:34');
INSERT INTO "sensorData" VALUES (1460,1,3.18425531914894,'2025-06-11 22:24:42');
INSERT INTO "sensorData" VALUES (1461,1,3.15920634920635,'2025-06-12 05:12:00');
INSERT INTO "sensorData" VALUES (1462,1,3.16458823529411,'2025-06-12 05:13:00');
INSERT INTO "sensorData" VALUES (1463,1,3.16154761904761,'2025-06-12 05:14:00');
INSERT INTO "sensorData" VALUES (1464,1,3.16190476190476,'2025-06-12 05:15:00');
INSERT INTO "sensorData" VALUES (1465,1,3.16220930232558,'2025-06-12 05:16:00');
INSERT INTO "sensorData" VALUES (1466,1,3.16119047619047,'2025-06-12 05:17:00');
INSERT INTO "sensorData" VALUES (1467,1,3.16058823529411,'2025-06-12 05:18:00');
INSERT INTO "sensorData" VALUES (1468,1,3.16,'2025-06-12 05:19:00');
INSERT INTO "sensorData" VALUES (1469,1,3.15764705882353,'2025-06-12 05:20:00');
INSERT INTO "sensorData" VALUES (1470,1,3.15647058823529,'2025-06-12 05:21:00');
INSERT INTO "sensorData" VALUES (1471,1,3.034,'2025-06-12 05:22:00');
INSERT INTO "sensorData" VALUES (1472,1,3.15295774647887,'2025-06-12 05:23:00');
INSERT INTO "sensorData" VALUES (1473,1,3.11885714285714,'2025-06-12 05:24:00');
INSERT INTO "sensorData" VALUES (1474,1,3.15833333333333,'2025-06-12 05:25:00');
INSERT INTO "sensorData" VALUES (1475,3,1.0,'2025-06-12 05:25:02');
INSERT INTO "sensorData" VALUES (1476,1,3.0990625,'2025-06-12 05:26:00');
INSERT INTO "sensorData" VALUES (1477,1,3.15088235294117,'2025-06-12 05:27:00');
INSERT INTO "sensorData" VALUES (1478,1,2.9958064516129,'2025-06-12 05:28:00');
INSERT INTO "sensorData" VALUES (1479,1,3.0444705882353,'2025-06-12 05:29:00');
INSERT INTO "sensorData" VALUES (1480,1,3.02862068965517,'2025-06-12 05:30:00');
INSERT INTO "sensorData" VALUES (1481,1,3.0216,'2025-06-12 05:31:00');
INSERT INTO "sensorData" VALUES (1482,1,3.00714285714286,'2025-06-12 05:32:00');
INSERT INTO "sensorData" VALUES (1483,1,3.02581818181818,'2025-06-12 05:33:00');
INSERT INTO "sensorData" VALUES (1484,1,3.0055,'2025-06-12 05:34:00');
INSERT INTO "sensorData" VALUES (1485,1,3.04445945945946,'2025-06-12 05:35:00');
INSERT INTO "sensorData" VALUES (1486,1,3.04917647058824,'2025-06-12 05:36:00');
INSERT INTO "sensorData" VALUES (1487,1,2.64285714285714,'2025-06-12 05:37:00');
INSERT INTO "sensorData" VALUES (1488,1,3.04716216216216,'2025-06-12 05:38:00');
INSERT INTO "sensorData" VALUES (1489,1,3.05952380952381,'2025-06-12 05:39:00');
INSERT INTO "sensorData" VALUES (1490,1,3.04724137931034,'2025-06-12 05:40:00');
INSERT INTO "sensorData" VALUES (1491,1,3.0826,'2025-06-12 05:41:00');
INSERT INTO "sensorData" VALUES (1492,1,3.12128571428571,'2025-06-12 05:42:00');
INSERT INTO "sensorData" VALUES (1493,1,2.77777777777778,'2025-06-12 05:43:00');
INSERT INTO "sensorData" VALUES (1494,1,3.06230769230769,'2025-06-12 05:44:00');
INSERT INTO "sensorData" VALUES (1495,1,3.06705882352941,'2025-06-12 05:45:00');
INSERT INTO "sensorData" VALUES (1496,1,3.06647058823529,'2025-06-12 05:46:00');
INSERT INTO "sensorData" VALUES (1497,1,3.06623529411765,'2025-06-12 05:47:00');
INSERT INTO "sensorData" VALUES (1498,1,3.06670588235294,'2025-06-12 05:48:00');
INSERT INTO "sensorData" VALUES (1499,1,3.07012345679013,'2025-06-12 05:49:00');
INSERT INTO "sensorData" VALUES (1500,1,0.0,'2025-06-12 05:50:00');
INSERT INTO "sensorData" VALUES (1501,1,3.09203389830509,'2025-06-12 05:51:00');
INSERT INTO "sensorData" VALUES (1502,1,3.11555555555556,'2025-06-12 05:52:00');
INSERT INTO "sensorData" VALUES (1503,1,3.00421052631579,'2025-06-12 05:53:00');
INSERT INTO "sensorData" VALUES (1504,1,3.09564102564102,'2025-06-12 05:54:00');
INSERT INTO "sensorData" VALUES (1505,1,2.74125,'2025-06-12 05:55:00');
INSERT INTO "sensorData" VALUES (1506,1,3.07128205128205,'2025-06-12 05:56:00');
INSERT INTO "sensorData" VALUES (1507,1,3.08958904109589,'2025-06-12 05:57:00');
INSERT INTO "sensorData" VALUES (1508,1,3.09435294117647,'2025-06-12 05:58:00');
INSERT INTO "sensorData" VALUES (1509,1,3.0926582278481,'2025-06-12 05:59:00');
INSERT INTO "sensorData" VALUES (1510,1,3.09505882352941,'2025-06-12 06:00:00');
INSERT INTO "sensorData" VALUES (1511,1,3.09435294117647,'2025-06-12 06:01:00');
INSERT INTO "sensorData" VALUES (1512,1,3.096,'2025-06-12 06:02:00');
INSERT INTO "sensorData" VALUES (1513,1,3.09670588235294,'2025-06-12 06:03:00');
INSERT INTO "sensorData" VALUES (1514,1,3.09602272727272,'2025-06-12 06:04:03');
INSERT INTO "sensorData" VALUES (1515,1,3.09341176470588,'2025-06-12 06:05:03');
INSERT INTO "sensorData" VALUES (1516,1,3.09341176470588,'2025-06-12 06:06:03');
INSERT INTO "sensorData" VALUES (1517,1,3.09305882352941,'2025-06-12 06:07:03');
INSERT INTO "sensorData" VALUES (1518,1,3.10347457627118,'2025-06-12 06:08:27');
INSERT INTO "sensorData" VALUES (1519,1,3.09141176470588,'2025-06-12 06:09:27');
INSERT INTO "sensorData" VALUES (1520,1,3.09117647058823,'2025-06-12 06:10:27');
INSERT INTO "sensorData" VALUES (1521,1,3.08694117647059,'2025-06-12 06:11:27');
INSERT INTO "sensorData" VALUES (1522,1,3.08267441860465,'2025-06-12 06:12:27');
INSERT INTO "sensorData" VALUES (1523,1,3.07670588235295,'2025-06-12 06:13:27');
INSERT INTO "sensorData" VALUES (1524,1,3.07776470588236,'2025-06-12 06:14:27');
INSERT INTO "sensorData" VALUES (1525,1,3.08258823529412,'2025-06-12 06:15:27');
INSERT INTO "sensorData" VALUES (1526,1,3.0895294117647,'2025-06-12 06:16:27');
INSERT INTO "sensorData" VALUES (1527,1,3.12197802197802,'2025-06-12 06:17:31');
INSERT INTO "users" VALUES (3,'elemmer','Starter123!','2025-06-04 15:30:54');
COMMIT;
